@STATIC;1.0;u;39;Resources/images/add-button-pressed.png762;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAIAAAB8nwMDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAc1JREFUeNqEVUuuwjAMpCU7uAQHKzepEOIeLDhVUS/Ali3q5w1vqmFw0veyiJzEHo8/dau2badpmud5svV8PodhmL4XdbRXVYV9s9lw1/KndDgcxnGkDQTuhOaRgrufbQkud/B4PJLOoiBt2UAQ37quIZNdkTv1qZkI4RrV9+INVKUGmYLbhgjq35V0ACOHJgRB+aQQCeeXITNaSZ69GgpCO50pIZQFmjvAcbvdpjxxIUBw9DiErvwUuQMal8lL5wWRGRdlevKcMEU5OtQW7t5JHocXA/vtdsPeNE1gDZQ849B5c6exekCp8IyxHXe73btQKSk5RVy5XLgzNHWxdveqLgrFDKASFu74Dl+vlzcZbrw3rtcr7cHdj8fjca3ZWVXgfGWG7PAgUnja7/dupiOzR06SPTPxa3IKon86nXhzPp9xialHiPv9HtyEtv5MAhEPMULu+54l4T2Of4AWJoFXL09iPtFCbYtr+ZrcRu0RgqBwuVywd13nr2tD5sM99F/woaMS7cTXIlg6Mq9kiMNbe41pcYq90elEsyJ4yg0c8X/u3gCemWBJ2b9nV1j7+aXi7A15cLhi0sMI0XxOxbicWv4/KeYkOGA+fgQYAFjELUDuoomtAAAAAElFTkSuQmCCu;31;Resources/images/add-button.png642;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAXCAIAAAB8nwMDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXNJREFUeNqMVDGShTAI1Ujr6bSx82p2Fl7C3uM4OmOxLn9x2CeQ7KZwQMIDHoR6Xdeqqu77rutaBVXl4E9jQl8j86m/fs5HcnAiPPfeiHjTW/lnSmnbNkII76aHM8gFwMumDkKDqd3kpQE8RUbWL6EuPibxUJZI3oSZ8R2SlMMbYd8KcCIghxSCepZ9b3znkduHdwbybJThcs00RH3QJVMxK5shM33fs7wsi2cj7OqDjnpYI468KdQLr9yluSZyQfBziYHNk6TruvZ9z5HL6jiOIjdNw9+u60SdpqnQlbZtj+MgY/aTJ6B6QdU/l8HvRAqu7yer8zzL1WEY+MuqmDi1wgqSn2Ta5fcio6BJQf9zkg+IlWpBphnh4vPDQwZaERFafISi8zzD1Y8JBVvMD6WJhBRhKsYXXwmZac35Iz+FnWE6nMKR8kvDWEPGxQvRUjhJfm/4lmKVWpbpP5nuFVILt26uiNdEFra55yT3qr3vtwADAB+RBrMPakx8AAAAAElFTkSuQmCCu;34;Resources/images/bg-button-bar.png1106;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAXCAIAAABmjyHIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAs9JREFUeNrMWlmuwjAMpE+5/504FHxULA8UFFn2eOK2DiRfKE2c1OuM6XI+n08Z4/l8HheyLAsRLp++ZrzF8jJkTRNihXOxaiW/yejxPv1+v89pQqma9rsp3WrNU6Wah94A7a3mI5a2PsEvHPRgPkqWO6R7orRf9yypKaJBucAzcFvftiiBxNvaZCRhHNfY55632222KFTxxy1nd3XDLhK+NnrsMhhh3nFBR9xq4/fp67oOCqMjnhUpWjCAuo+6WTp4K8+3pLT6SM3kR2Ez4cxwZp/hg9iE21st6x60FRwl1MIU1SeGoFe9uq/3eDw2qaDKrLvaueoaStH1t1rsZd2vhUEJ4u+vDYgLDt4Npk0lU8IciWW6tVbttdgqePkdxfJz1ev1OgJGjiuHXC8wiI8nZI5rsiy0b5T0TJgip+U3W5baIw+XygwJ857HQ2Q8WY95CVQBR8AnATi7tecdtFwul9OsI8jugxAD8pZg0YXLtqbKQaPkJtIRKTRCDIjVuUzbfOlKiFgxxa7B3JuGSFM8kXDkHZHHoZC1mTWGlaDQn2dg2KMYZNSSlQTSXcFqQSmXYBbSqZH9M8thSFhL2xDftYu9jVlRMW+PVCoaWggaCXZKPfSvUIblV7BluvVNPbKY1WArudX4eCxa8OY5vvVuOUNQidUUb6nY1AqjXNHKHfiza4ixiTQ3FpVeYO8D6s7DNZKw20j1gAmZ92gJb5zmqrce+neae3jZMgg6YLdFbpGGhHHDhcsiak9RLjhIOWUQGEkhFbIcckoAMQsPblXkiJ0IYPEqdGQ+jRdO1SCFeY9YNxI35KON+AcAtvjZokhIy1D6XyZMm1a5sEntdVi8IIYlE9JNwhw8rwpuyUWL9fIzJlKPxXuYmzM/zy0sOYnEJTGb/bOXt1Kz1FsgYfoVqfBYPFEZ5OawetleGiT1HoDy8kE3CY9LofVF/gUYAI7JIA2nhCEKAAAAAElFTkSuQmCCu;42;Resources/images/bg-CollectionViewItem.png242;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAZCAIAAAB/8tMoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEVJREFUeNosi9kNgDAAQg1DmO7qCO7goJVD0vpBHuHAdT8Y40QS+JcUxC4Fla5eE1Z9Ozaf5PqQe0PtveP1p3ZvH58AAwAOtUV7Ewm67wAAAABJRU5ErkJggg==u;35;Resources/images/bg-header-view.png238;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAENJREFUeNpUizsOwDAIQ5HLPZi5vzgcA7hNo0TJZD9/EBEwM2QmuhskfxWRg/lpb14bjlymX934VdW9O7yqPu7+CjAAmjFJw8YdnzkAAAAASUVORK5CYII=u;37;Resources/images/bg-tweets-header.png262;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA6CAIAAAD+yqSwAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNpsjjEOwDAIAzFd+P/Mz/gGK9A2VaKIdEAYc7LMqgozY3fnqhpDRJyZY/d7etNfuojjYYCPiYjF97xXg8BFdWSNH3B4e5ed671+el8icgswAHe5YVaaJgURAAAAAElFTkSuQmCCu;21;Resources/spinner.gif2490;data:image/gif;base64,R0lGODlhEAAQAPQAAO7u7gAAAODg4IGBgdHR0UFBQXJycgAAAFJSUiEhIaGhobKyshISEpKSkgMDAzIyMmFhYQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAFdyAgAgIJIeWoAkRCCMdBkKtIHIngyMKsErPBYbADpkSCwhDmQCBethRB6Vj4kFCkQPG4IlWDgrNRIwnO4UKBXDufzQvDMaoSDBgFb886MiQadgNABAokfCwzBA8LCg0Egl8jAggGAA1kBIA1BAYzlyILczULC2UhACH5BAAKAAEALAAAAAAQABAAAAV2ICACAmlAZTmOREEIyUEQjLKKxPHADhEvqxlgcGgkGI1DYSVAIAWMx+lwSKkICJ0QsHi9RgKBwnVTiRQQgwF4I4UFDQQEwi6/3YSGWRRmjhEETAJfIgMFCnAKM0KDV4EEEAQLiF18TAYNXDaSe3x6mjidN1s3IQAh+QQACgACACwAAAAAEAAQAAAFeCAgAgLZDGU5jgRECEUiCI+yioSDwDJyLKsXoHFQxBSHAoAAFBhqtMJg8DgQBgfrEsJAEAg4YhZIEiwgKtHiMBgtpg3wbUZXGO7kOb1MUKRFMysCChAoggJCIg0GC2aNe4gqQldfL4l/Ag1AXySJgn5LcoE3QXI3IQAh+QQACgADACwAAAAAEAAQAAAFdiAgAgLZNGU5joQhCEjxIssqEo8bC9BRjy9Ag7GILQ4QEoE0gBAEBcOpcBA0DoxSK/e8LRIHn+i1cK0IyKdg0VAoljYIg+GgnRrwVS/8IAkICyosBIQpBAMoKy9dImxPhS+GKkFrkX+TigtLlIyKXUF+NjagNiEAIfkEAAoABAAsAAAAABAAEAAABWwgIAICaRhlOY4EIgjH8R7LKhKHGwsMvb4AAy3WODBIBBKCsYA9TjuhDNDKEVSERezQEL0WrhXucRUQGuik7bFlngzqVW9LMl9XWvLdjFaJtDFqZ1cEZUB0dUgvL3dgP4WJZn4jkomWNpSTIyEAIfkEAAoABQAsAAAAABAAEAAABX4gIAICuSxlOY6CIgiD8RrEKgqGOwxwUrMlAoSwIzAGpJpgoSDAGifDY5kopBYDlEpAQBwevxfBtRIUGi8xwWkDNBCIwmC9Vq0aiQQDQuK+VgQPDXV9hCJjBwcFYU5pLwwHXQcMKSmNLQcIAExlbH8JBwttaX0ABAcNbWVbKyEAIfkEAAoABgAsAAAAABAAEAAABXkgIAICSRBlOY7CIghN8zbEKsKoIjdFzZaEgUBHKChMJtRwcWpAWoWnifm6ESAMhO8lQK0EEAV3rFopIBCEcGwDKAqPh4HUrY4ICHH1dSoTFgcHUiZjBhAJB2AHDykpKAwHAwdzf19KkASIPl9cDgcnDkdtNwiMJCshACH5BAAKAAcALAAAAAAQABAAAAV3ICACAkkQZTmOAiosiyAoxCq+KPxCNVsSMRgBsiClWrLTSWFoIQZHl6pleBh6suxKMIhlvzbAwkBWfFWrBQTxNLq2RG2yhSUkDs2b63AYDAoJXAcFRwADeAkJDX0AQCsEfAQMDAIPBz0rCgcxky0JRWE1AmwpKyEAIfkEAAoACAAsAAAAABAAEAAABXkgIAICKZzkqJ4nQZxLqZKv4NqNLKK2/Q4Ek4lFXChsg5ypJjs1II3gEDUSRInEGYAw6B6zM4JhrDAtEosVkLUtHA7RHaHAGJQEjsODcEg0FBAFVgkQJQ1pAwcDDw8KcFtSInwJAowCCA6RIwqZAgkPNgVpWndjdyohACH5BAAKAAkALAAAAAAQABAAAAV5ICACAimc5KieLEuUKvm2xAKLqDCfC2GaO9eL0LABWTiBYmA06W6kHgvCqEJiAIJiu3gcvgUsscHUERm+kaCxyxa+zRPk0SgJEgfIvbAdIAQLCAYlCj4DBw0IBQsMCjIqBAcPAooCBg9pKgsJLwUFOhCZKyQDA3YqIQAh+QQACgAKACwAAAAAEAAQAAAFdSAgAgIpnOSonmxbqiThCrJKEHFbo8JxDDOZYFFb+A41E4H4OhkOipXwBElYITDAckFEOBgMQ3arkMkUBdxIUGZpEb7kaQBRlASPg0FQQHAbEEMGDSVEAA1QBhAED1E0NgwFAooCDWljaQIQCE5qMHcNhCkjIQAh+QQACgALACwAAAAAEAAQAAAFeSAgAgIpnOSoLgxxvqgKLEcCC65KEAByKK8cSpA4DAiHQ/DkKhGKh4ZCtCyZGo6F6iYYPAqFgYy02xkSaLEMV34tELyRYNEsCQyHlvWkGCzsPgMCEAY7Cg04Uk48LAsDhRA8MVQPEF0GAgqYYwSRlycNcWskCkApIyEAOwAAAAAAAAAAAA==p;15;AppController.jI;21;Foundation/CPObject.ji;26;classes/views/HeaderView.ji;41;classes/views/DefaultCollectionViewItem.ji;32;classes/views/TweetsHeaderView.ji;27;classes/views/DDButtonBar.ji;43;classes/controllers/SuggestionsController.ji;35;classes/views/SuggestionSheetView.ji;42;classes/controllers/TwitterersController.ji;29;classes/views/TwittererView.ji;26;classes/models/Twitterer.ji;24;classes/views/YearView.ji;37;classes/controllers/YearsController.ji;25;classes/views/MonthView.ji;38;classes/controllers/MonthsController.ji;22;classes/models/Tweet.ji;25;classes/views/TweetView.ji;38;classes/controllers/TweetsController.jc;7061;
var _1=objj_allocateClassPair(CPObject,"AppController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("theWindow"),new objj_ivar("headerView"),new objj_ivar("twitterersCollectionView"),new objj_ivar("yearsCollectionView"),new objj_ivar("monthsCollectionView"),new objj_ivar("tweetsCollectionView"),new objj_ivar("tweetsHeaderView"),new objj_ivar("twittererImageView"),new objj_ivar("buttonBar"),new objj_ivar("loadingIndicator"),new objj_ivar("twitterers"),new objj_ivar("suggestionSheet"),new objj_ivar("suggestionsController")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("theWindow"),function(_3,_4){
with(_3){
return theWindow;
}
}),new objj_method(sel_getUid("setTheWindow:"),function(_5,_6,_7){
with(_5){
theWindow=_7;
}
}),new objj_method(sel_getUid("headerView"),function(_8,_9){
with(_8){
return headerView;
}
}),new objj_method(sel_getUid("setHeaderView:"),function(_a,_b,_c){
with(_a){
headerView=_c;
}
}),new objj_method(sel_getUid("twitterersCollectionView"),function(_d,_e){
with(_d){
return twitterersCollectionView;
}
}),new objj_method(sel_getUid("setTwitterersCollectionView:"),function(_f,_10,_11){
with(_f){
twitterersCollectionView=_11;
}
}),new objj_method(sel_getUid("yearsCollectionView"),function(_12,_13){
with(_12){
return yearsCollectionView;
}
}),new objj_method(sel_getUid("setYearsCollectionView:"),function(_14,_15,_16){
with(_14){
yearsCollectionView=_16;
}
}),new objj_method(sel_getUid("monthsCollectionView"),function(_17,_18){
with(_17){
return monthsCollectionView;
}
}),new objj_method(sel_getUid("setMonthsCollectionView:"),function(_19,_1a,_1b){
with(_19){
monthsCollectionView=_1b;
}
}),new objj_method(sel_getUid("tweetsCollectionView"),function(_1c,_1d){
with(_1c){
return tweetsCollectionView;
}
}),new objj_method(sel_getUid("setTweetsCollectionView:"),function(_1e,_1f,_20){
with(_1e){
tweetsCollectionView=_20;
}
}),new objj_method(sel_getUid("tweetsHeaderView"),function(_21,_22){
with(_21){
return tweetsHeaderView;
}
}),new objj_method(sel_getUid("setTweetsHeaderView:"),function(_23,_24,_25){
with(_23){
tweetsHeaderView=_25;
}
}),new objj_method(sel_getUid("twittererImageView"),function(_26,_27){
with(_26){
return twittererImageView;
}
}),new objj_method(sel_getUid("setTwittererImageView:"),function(_28,_29,_2a){
with(_28){
twittererImageView=_2a;
}
}),new objj_method(sel_getUid("buttonBar"),function(_2b,_2c){
with(_2b){
return buttonBar;
}
}),new objj_method(sel_getUid("setButtonBar:"),function(_2d,_2e,_2f){
with(_2d){
buttonBar=_2f;
}
}),new objj_method(sel_getUid("loadingIndicator"),function(_30,_31){
with(_30){
return loadingIndicator;
}
}),new objj_method(sel_getUid("setLoadingIndicator:"),function(_32,_33,_34){
with(_32){
loadingIndicator=_34;
}
}),new objj_method(sel_getUid("applicationDidFinishLaunching:"),function(_35,_36,_37){
with(_35){
var _38=objj_msgSend(objj_msgSend(TwitterersController,"alloc"),"init");
objj_msgSend(_38,"setTwitterersCollectionView:",twitterersCollectionView);
objj_msgSend(_38,"setTwittererImageView:",twittererImageView);
objj_msgSend(twitterersCollectionView,"setDelegate:",_38);
var _39=objj_msgSend(objj_msgSend(TweetsController,"alloc"),"init");
objj_msgSend(_39,"setTweetsCollectionView:",tweetsCollectionView);
objj_msgSend(_39,"setLoadingIndicator:",loadingIndicator);
objj_msgSend(tweetsCollectionView,"setDelegate:",_39);
var _3a=objj_msgSend(objj_msgSend(YearsController,"alloc"),"initWithViewController:",yearsCollectionView);
objj_msgSend(_3a,"setYearsCollectionView:",yearsCollectionView);
objj_msgSend(yearsCollectionView,"setDelegate:",_3a);
var _3b=objj_msgSend(objj_msgSend(MonthsController,"alloc"),"initWithViewController:",monthsCollectionView);
objj_msgSend(_3b,"setMonthsCollectionView:",monthsCollectionView);
objj_msgSend(monthsCollectionView,"setDelegate:",_3b);
suggestionsController=objj_msgSend(objj_msgSend(SuggestionsController,"alloc"),"init");
objj_msgSend(suggestionsController,"setSuggestionSheet:",suggestionSheet);
objj_msgSend(suggestionsController,"setWindow:",theWindow);
objj_msgSend(suggestionSheet,"setSuggestionsController:",suggestionsController);
objj_msgSend(buttonBar,"setSuggestionsController:",suggestionsController);
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_3c,_3d){
with(_3c){
suggestionSheet=objj_msgSend(objj_msgSend(SuggestionSheetView,"alloc"),"init");
objj_msgSend(twitterersCollectionView,"setMaxNumberOfColumns:",1);
objj_msgSend(twitterersCollectionView,"setVerticalMargin:",0);
objj_msgSend(twitterersCollectionView,"setSelectable:",YES);
objj_msgSend(twitterersCollectionView,"setItemPrototype:",objj_msgSend(objj_msgSend(CPCollectionViewItem,"alloc"),"initWithCibName:bundle:","TwittererView",nil));
objj_msgSend(twitterersCollectionView,"setMinItemSize:",CGSizeMake(135,25));
objj_msgSend(twitterersCollectionView,"setMaxItemSize:",CGSizeMake(150,25));
objj_msgSend(yearsCollectionView,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithHexString:","f3f7fb"));
objj_msgSend(objj_msgSend(yearsCollectionView,"superview"),"setBackgroundColor:",objj_msgSend(CPColor,"colorWithHexString:","f3f7fb"));
objj_msgSend(yearsCollectionView,"setMaxNumberOfColumns:",1);
objj_msgSend(yearsCollectionView,"setVerticalMargin:",0);
objj_msgSend(yearsCollectionView,"setSelectable:",YES);
objj_msgSend(yearsCollectionView,"setItemPrototype:",objj_msgSend(objj_msgSend(CPCollectionViewItem,"alloc"),"initWithCibName:bundle:","YearView",nil));
objj_msgSend(yearsCollectionView,"setMinItemSize:",CGSizeMake(135,25));
objj_msgSend(yearsCollectionView,"setMaxItemSize:",CGSizeMake(1000,25));
objj_msgSend(monthsCollectionView,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithHexString:","f3f7fb"));
objj_msgSend(objj_msgSend(monthsCollectionView,"superview"),"setBackgroundColor:",objj_msgSend(CPColor,"colorWithHexString:","f3f7fb"));
objj_msgSend(monthsCollectionView,"setMaxNumberOfColumns:",1);
objj_msgSend(monthsCollectionView,"setVerticalMargin:",0);
objj_msgSend(monthsCollectionView,"setSelectable:",YES);
objj_msgSend(monthsCollectionView,"setItemPrototype:",objj_msgSend(objj_msgSend(CPCollectionViewItem,"alloc"),"initWithCibName:bundle:","MonthView",nil));
objj_msgSend(monthsCollectionView,"setMinItemSize:",CGSizeMake(135,25));
objj_msgSend(monthsCollectionView,"setMaxItemSize:",CGSizeMake(1000,25));
objj_msgSend(tweetsCollectionView,"setMaxNumberOfColumns:",1);
objj_msgSend(tweetsCollectionView,"setVerticalMargin:",0);
objj_msgSend(tweetsCollectionView,"setSelectable:",YES);
objj_msgSend(tweetsCollectionView,"setItemPrototype:",objj_msgSend(objj_msgSend(CPCollectionViewItem,"alloc"),"initWithCibName:bundle:","TweetView",nil));
objj_msgSend(tweetsCollectionView,"setMinItemSize:",CGSizeMake(400,25));
objj_msgSend(tweetsCollectionView,"setMaxItemSize:",CGSizeMake(5000,25));
var _3e=objj_msgSend(tweetsCollectionView,"superview");
objj_msgSend(loadingIndicator,"setFrame:",objj_msgSend(_3e,"frame"));
objj_msgSend(_3e,"addSubview:",loadingIndicator);
}
})]);
p;6;main.jI;23;Foundation/Foundation.jI;15;AppKit/AppKit.jI;42;Extensions/CPActiveRecord/CPActiveRecord.ji;15;AppController.jc;52;
main=function(_1,_2){
CPApplicationMain(_1,_2);
};
p;38;classes/controllers/MonthsController.jc;2324;
var _1=objj_allocateClassPair(CPObject,"MonthsController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("months"),new objj_ivar("monthsCollectionView"),new objj_ivar("currentObject"),new objj_ivar("selectedYear")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("months"),function(_3,_4){
with(_3){
return months;
}
}),new objj_method(sel_getUid("setMonths:"),function(_5,_6,_7){
with(_5){
months=_7;
}
}),new objj_method(sel_getUid("monthsCollectionView"),function(_8,_9){
with(_8){
return monthsCollectionView;
}
}),new objj_method(sel_getUid("setMonthsCollectionView:"),function(_a,_b,_c){
with(_a){
monthsCollectionView=_c;
}
}),new objj_method(sel_getUid("currentObject"),function(_d,_e){
with(_d){
return currentObject;
}
}),new objj_method(sel_getUid("setCurrentObject:"),function(_f,_10,_11){
with(_f){
currentObject=_11;
}
}),new objj_method(sel_getUid("initWithViewController:"),function(_12,_13,_14){
with(_12){
_12=objj_msgSendSuper({receiver:_12,super_class:objj_getClass("CPObject")},"init");
if(_12){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_12,sel_getUid("yearChanged:"),"SelectedYearChanged",nil);
monthsCollectionView=_14;
}
return _12;
}
}),new objj_method(sel_getUid("collectionViewDidChangeSelection:"),function(_15,_16,_17){
with(_15){
var _18=objj_msgSend(objj_msgSend(_17,"selectionIndexes"),"firstIndex");
currentObject=objj_msgSend(objj_msgSend(_17,"content"),"objectAtIndex:",_18);
var _19=selectedYear+"/"+currentObject;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:","SelectedMonthChanged",_19);
}
}),new objj_method(sel_getUid("yearChanged:"),function(_1a,_1b,_1c){
with(_1a){
selectedYear=objj_msgSend(_1c,"object");
var _1d=new Date;
var _1e=_1d.getFullYear();
var _1f=_1d.getMonth()+1;
var _20=_1e==selectedYear?_1f:12;
var _21=0;
var _22=objj_msgSend(objj_msgSend(CPArray,"alloc"),"init");
for(i=1;i<=_20;i++){
var _23=i<10?("0"+i):i;
objj_msgSend(_22,"insertObject:atIndex:",_23,0);
}
objj_msgSend(monthsCollectionView,"setContent:",_22);
objj_msgSend(monthsCollectionView,"setSelectionIndexes:",objj_msgSend(objj_msgSend(CPIndexSet,"alloc"),"initWithIndex:",_21));
}
})]);
p;43;classes/controllers/SuggestionsController.jc;1916;
var _1=objj_allocateClassPair(CPObject,"SuggestionsController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("suggestionSheet"),new objj_ivar("window"),new objj_ivar("suggestionTextField")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("suggestionSheet"),function(_3,_4){
with(_3){
return suggestionSheet;
}
}),new objj_method(sel_getUid("setSuggestionSheet:"),function(_5,_6,_7){
with(_5){
suggestionSheet=_7;
}
}),new objj_method(sel_getUid("window"),function(_8,_9){
with(_8){
return window;
}
}),new objj_method(sel_getUid("setWindow:"),function(_a,_b,_c){
with(_a){
window=_c;
}
}),new objj_method(sel_getUid("init"),function(_d,_e){
with(_d){
_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPObject")},"init");
if(_d){
}
return _d;
}
}),new objj_method(sel_getUid("displaySheet:"),function(_f,_10,_11){
with(_f){
suggestionTextField=objj_msgSend(suggestionSheet,"suggestionTextField");
objj_msgSend(suggestionTextField,"setStringValue:","");
objj_msgSend(suggestionSheet,"makeFirstResponder:",suggestionTextField);
objj_msgSend(CPApp,"beginSheet:modalForWindow:modalDelegate:didEndSelector:contextInfo:",suggestionSheet,window,_f,sel_getUid("didEndSheet:returnCode:contextInfo:"),nil);
}
}),new objj_method(sel_getUid("suggestTwitterer:"),function(_12,_13,_14){
with(_12){
var str=objj_msgSend(suggestionTextField,"stringValue");
var _15=objj_msgSend(Twitterer,"new:",{screen_name:str});
objj_msgSend(_15,"save");
objj_msgSend(suggestionSheet,"showConfirmMessage");
}
}),new objj_method(sel_getUid("closeSheet:"),function(_16,_17,_18){
with(_16){
objj_msgSend(CPApp,"endSheet:returnCode:",suggestionSheet,objj_msgSend(_18,"tag"));
}
}),new objj_method(sel_getUid("didEndSheet:returnCode:contextInfo:"),function(_19,_1a,_1b,_1c,_1d){
with(_19){
objj_msgSend(_1b,"orderOut:",_19);
}
})]);
p;38;classes/controllers/TweetsController.jc;5400;
var _1=objj_allocateClassPair(CPObject,"TweetsController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("tweets"),new objj_ivar("tweetsCollectionView"),new objj_ivar("currentObject"),new objj_ivar("loadingIndicator"),new objj_ivar("currentLocalDBTwittererId"),new objj_ivar("currentTwittererId"),new objj_ivar("currentTwittererScreenName"),new objj_ivar("currentYear"),new objj_ivar("currentMonth"),new objj_ivar("searchTerms")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("tweets"),function(_3,_4){
with(_3){
return tweets;
}
}),new objj_method(sel_getUid("setTweets:"),function(_5,_6,_7){
with(_5){
tweets=_7;
}
}),new objj_method(sel_getUid("tweetsCollectionView"),function(_8,_9){
with(_8){
return tweetsCollectionView;
}
}),new objj_method(sel_getUid("setTweetsCollectionView:"),function(_a,_b,_c){
with(_a){
tweetsCollectionView=_c;
}
}),new objj_method(sel_getUid("currentObject"),function(_d,_e){
with(_d){
return currentObject;
}
}),new objj_method(sel_getUid("setCurrentObject:"),function(_f,_10,_11){
with(_f){
currentObject=_11;
}
}),new objj_method(sel_getUid("loadingIndicator"),function(_12,_13){
with(_12){
return loadingIndicator;
}
}),new objj_method(sel_getUid("setLoadingIndicator:"),function(_14,_15,_16){
with(_14){
loadingIndicator=_16;
}
}),new objj_method(sel_getUid("init"),function(_17,_18){
with(_17){
_17=objj_msgSendSuper({receiver:_17,super_class:objj_getClass("CPObject")},"init");
if(_17){
currentLocalDBTwittererId="";
currentTwittererId="";
currentTwittererScreenName="";
currentYear="";
currentMonth="";
searchTerms="";
objj_msgSend(Tweet,"addObserver:selector:",_17,sel_getUid("tweetsDidLoad:"));
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_17,sel_getUid("twittererChanged:"),"SelectedTwittererChanged",nil);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_17,sel_getUid("monthChanged:"),"SelectedMonthChanged",nil);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_17,sel_getUid("searchPerformed:"),"SearchPerformed",nil);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_17,sel_getUid("openTweet:"),"TweetDoubleClicked",nil);
}
return _17;
}
}),new objj_method(sel_getUid("tweetsDidLoad:"),function(_19,_1a,_1b){
with(_19){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:","TweetsDidLoad",nil);
}
}),new objj_method(sel_getUid("twittererChanged:"),function(_1c,_1d,_1e){
with(_1c){
tweets=[];
objj_msgSend(tweetsCollectionView,"setContent:",tweets);
objj_msgSend(objj_msgSend(tweetsCollectionView,"superview"),"addSubview:",loadingIndicator);
var _1f=objj_msgSend(_1e,"object");
currentLocalDBTwittererId=objj_msgSend(_1f,"identifier");
currentTwittererId=objj_msgSend(_1f,"twittererId");
currentTwittererScreenName=objj_msgSend(_1f,"screenName");
}
}),new objj_method(sel_getUid("monthChanged:"),function(_20,_21,_22){
with(_20){
var _23=objj_msgSend(_22,"object");
currentYear=objj_msgSend(_23,"substringWithRange:",CPMakeRange(0,4));
currentMonth=objj_msgSend(_23,"substringWithRange:",CPMakeRange(5,2));
objj_msgSend(_20,"displayTweets");
}
}),new objj_method(sel_getUid("searchPerformed:"),function(_24,_25,_26){
with(_24){
searchTerms=objj_msgSend(_26,"object");
var _27={twittererId:currentTwittererId,year:currentYear,month:currentMonth,text:searchTerms};
tweets=objj_msgSend(Tweet,"find:",{all:true,conditions:_27});
tweets=objj_msgSend(TweetsController,"sort:",tweets);
objj_msgSend(tweetsCollectionView,"setContent:",tweets);
}
}),new objj_method(sel_getUid("displayTweets"),function(_28,_29){
with(_28){
var _2a={twittererId:currentTwittererId,year:currentYear,month:currentMonth,text:searchTerms};
tweets=objj_msgSend(Tweet,"find:",{all:true,conditions:_2a});
tweets=objj_msgSend(TweetsController,"sort:",tweets);
if(objj_msgSend(tweets,"count")===0){
var _2b=objj_msgSend(objj_msgSend(Tweet,"alloc"),"init");
objj_msgSend(_2b,"setText:","This dev doesn't tweet much. Try to go back in time.");
objj_msgSend(tweets,"addObject:",_2b);
}
objj_msgSend(tweetsCollectionView,"setContent:",tweets);
objj_msgSend(loadingIndicator,"removeFromSuperview");
console.log("-- tweets (#"+objj_msgSend(tweets,"count")+") will display, for : "+currentTwittererScreenName+"("+currentTwittererId+") on : "+currentYear+"/"+currentMonth);
}
}),new objj_method(sel_getUid("openTweet:"),function(_2c,_2d,_2e){
with(_2c){
if(objj_msgSend(currentObject,"tweetId")!==nil){
window.open("http://twitter.com/"+currentTwittererScreenName+"/status/"+objj_msgSend(currentObject,"tweetId"));
}
}
}),new objj_method(sel_getUid("collectionViewDidChangeSelection:"),function(_2f,_30,_31){
with(_2f){
var _32=objj_msgSend(objj_msgSend(_31,"selectionIndexes"),"firstIndex");
currentObject=objj_msgSend(objj_msgSend(_31,"content"),"objectAtIndex:",_32);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("sort:"),function(_33,_34,_35){
with(_33){
var _36=objj_msgSend(objj_msgSend(CPSortDescriptor,"alloc"),"initWithKey:ascending:selector:","createdAt",NO,sel_getUid("compare:"));
var _37=objj_msgSend(CPArray,"arrayWithObjects:",_36,nil);
return objj_msgSend(_35,"sortedArrayUsingDescriptors:",_37);
}
})]);
p;42;classes/controllers/TwitterersController.jc;2974;
var _1=objj_allocateClassPair(CPObject,"TwitterersController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("twitterers"),new objj_ivar("twitterersCollectionView"),new objj_ivar("currentObject"),new objj_ivar("twittererImageView")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("twitterers"),function(_3,_4){
with(_3){
return twitterers;
}
}),new objj_method(sel_getUid("setTwitterers:"),function(_5,_6,_7){
with(_5){
twitterers=_7;
}
}),new objj_method(sel_getUid("twitterersCollectionView"),function(_8,_9){
with(_8){
return twitterersCollectionView;
}
}),new objj_method(sel_getUid("setTwitterersCollectionView:"),function(_a,_b,_c){
with(_a){
twitterersCollectionView=_c;
}
}),new objj_method(sel_getUid("currentObject"),function(_d,_e){
with(_d){
return currentObject;
}
}),new objj_method(sel_getUid("setCurrentObject:"),function(_f,_10,_11){
with(_f){
currentObject=_11;
}
}),new objj_method(sel_getUid("twittererImageView"),function(_12,_13){
with(_12){
return twittererImageView;
}
}),new objj_method(sel_getUid("setTwittererImageView:"),function(_14,_15,_16){
with(_14){
twittererImageView=_16;
}
}),new objj_method(sel_getUid("init"),function(_17,_18){
with(_17){
_17=objj_msgSendSuper({receiver:_17,super_class:objj_getClass("CPObject")},"init");
if(_17){
twittererImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"init");
objj_msgSend(Twitterer,"addObserver:selector:",_17,sel_getUid("twitterersDidLoad:"));
}
return _17;
}
}),new objj_method(sel_getUid("twitterersDidLoad:"),function(_19,_1a,_1b){
with(_19){
twitterers=objj_msgSend(Twitterer,"find:",{all:true});
var _1c=objj_msgSend(objj_msgSend(CPSortDescriptor,"alloc"),"initWithKey:ascending:selector:","screenName",YES,sel_getUid("compare:"));
var _1d=objj_msgSend(CPArray,"arrayWithObjects:",_1c,nil);
twitterers=objj_msgSend(twitterers,"sortedArrayUsingDescriptors:",_1d);
objj_msgSend(twitterersCollectionView,"setContent:",twitterers);
objj_msgSend(twitterersCollectionView,"setSelectionIndexes:",objj_msgSend(objj_msgSend(CPIndexSet,"alloc"),"initWithIndex:",0));
}
}),new objj_method(sel_getUid("twittererDidLoad:"),function(_1e,_1f,_20){
with(_1e){
objj_msgSend(Twitterer,"reload");
}
}),new objj_method(sel_getUid("collectionViewDidChangeSelection:"),function(_21,_22,_23){
with(_21){
var _24=objj_msgSend(objj_msgSend(_23,"selectionIndexes"),"firstIndex");
currentObject=objj_msgSend(objj_msgSend(_23,"content"),"objectAtIndex:",_24);
var _25=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(currentObject,"profileImageUrl"));
objj_msgSend(twittererImageView,"setImage:",_25);
var _26=objj_msgSend(currentObject,"identifier");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:","SelectedTwittererChanged",currentObject);
objj_msgSend(Tweet,"setCurrentTwittererId:",_26);
objj_msgSend(Tweet,"reload");
}
})]);
p;37;classes/controllers/YearsController.jc;1958;
var _1=objj_allocateClassPair(CPObject,"YearsController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("years"),new objj_ivar("yearsCollectionView"),new objj_ivar("currentObject")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("years"),function(_3,_4){
with(_3){
return years;
}
}),new objj_method(sel_getUid("setYears:"),function(_5,_6,_7){
with(_5){
years=_7;
}
}),new objj_method(sel_getUid("yearsCollectionView"),function(_8,_9){
with(_8){
return yearsCollectionView;
}
}),new objj_method(sel_getUid("setYearsCollectionView:"),function(_a,_b,_c){
with(_a){
yearsCollectionView=_c;
}
}),new objj_method(sel_getUid("currentObject"),function(_d,_e){
with(_d){
return currentObject;
}
}),new objj_method(sel_getUid("setCurrentObject:"),function(_f,_10,_11){
with(_f){
currentObject=_11;
}
}),new objj_method(sel_getUid("initWithViewController:"),function(_12,_13,_14){
with(_12){
_12=objj_msgSendSuper({receiver:_12,super_class:objj_getClass("CPObject")},"init");
if(_12){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_12,sel_getUid("tweetsDidLoad:"),"TweetsDidLoad",nil);
yearsCollectionView=_14;
}
return _12;
}
}),new objj_method(sel_getUid("tweetsDidLoad:"),function(_15,_16,_17){
with(_15){
objj_msgSend(yearsCollectionView,"setContent:",["2010","2009","2008","2007"]);
objj_msgSend(yearsCollectionView,"setSelectionIndexes:",objj_msgSend(objj_msgSend(CPIndexSet,"alloc"),"initWithIndex:",0));
}
}),new objj_method(sel_getUid("collectionViewDidChangeSelection:"),function(_18,_19,_1a){
with(_18){
var _1b=objj_msgSend(objj_msgSend(_1a,"selectionIndexes"),"firstIndex");
currentObject=objj_msgSend(objj_msgSend(_1a,"content"),"objectAtIndex:",_1b);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:","SelectedYearChanged",currentObject);
}
})]);
p;22;classes/models/Tweet.jc;2092;
var _1;
var _2=objj_allocateClassPair(CPActiveRecord,"Tweet"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("twittererId"),new objj_ivar("text"),new objj_ivar("createdAt"),new objj_ivar("tweetId")]);
objj_registerClassPair(_2);
objj_addClassForBundle(_2,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_2,[new objj_method(sel_getUid("twittererId"),function(_4,_5){
with(_4){
return twittererId;
}
}),new objj_method(sel_getUid("setTwittererId:"),function(_6,_7,_8){
with(_6){
twittererId=_8;
}
}),new objj_method(sel_getUid("text"),function(_9,_a){
with(_9){
return text;
}
}),new objj_method(sel_getUid("setText:"),function(_b,_c,_d){
with(_b){
text=_d;
}
}),new objj_method(sel_getUid("createdAt"),function(_e,_f){
with(_e){
return createdAt;
}
}),new objj_method(sel_getUid("setCreatedAt:"),function(_10,_11,_12){
with(_10){
createdAt=_12;
}
}),new objj_method(sel_getUid("tweetId"),function(_13,_14){
with(_13){
return tweetId;
}
}),new objj_method(sel_getUid("setTweetId:"),function(_15,_16,_17){
with(_15){
tweetId=_17;
}
}),new objj_method(sel_getUid("year"),function(_18,_19){
with(_18){
return objj_msgSend(createdAt,"substringWithRange:",CPMakeRange(0,4));
}
}),new objj_method(sel_getUid("month"),function(_1a,_1b){
with(_1a){
return objj_msgSend(createdAt,"substringWithRange:",CPMakeRange(5,2));
}
}),new objj_method(sel_getUid("day"),function(_1c,_1d){
with(_1c){
return objj_msgSend(createdAt,"substringWithRange:",CPMakeRange(8,2));
}
}),new objj_method(sel_getUid("attributes"),function(_1e,_1f){
with(_1e){
return {"tweet":{"text":text}};
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("setCurrentTwittererId:"),function(_20,_21,_22){
with(_20){
_1=_22;
}
}),new objj_method(sel_getUid("currentTwittererId"),function(_23,_24){
with(_23){
return _1;
}
}),new objj_method(sel_getUid("resourcesPath"),function(_25,_26){
with(_25){
if(!_1){
return nil;
}
var _27=objj_msgSend(Twitterer,"resourcesPath");
_27+="/"+_1;
_27+="/"+objj_msgSend(objj_msgSend(_25,"className"),"lowercaseString")+"s";
return objj_msgSend(CPURL,"URLWithString:",_27);
}
})]);
p;26;classes/models/Twitterer.jc;1430;
var _1=objj_allocateClassPair(CPActiveRecord,"Twitterer"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("twittererId"),new objj_ivar("name"),new objj_ivar("screenName"),new objj_ivar("location"),new objj_ivar("profileImageUrl")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("twittererId"),function(_3,_4){
with(_3){
return twittererId;
}
}),new objj_method(sel_getUid("setTwittererId:"),function(_5,_6,_7){
with(_5){
twittererId=_7;
}
}),new objj_method(sel_getUid("name"),function(_8,_9){
with(_8){
return name;
}
}),new objj_method(sel_getUid("setName:"),function(_a,_b,_c){
with(_a){
name=_c;
}
}),new objj_method(sel_getUid("screenName"),function(_d,_e){
with(_d){
return screenName;
}
}),new objj_method(sel_getUid("setScreenName:"),function(_f,_10,_11){
with(_f){
screenName=_11;
}
}),new objj_method(sel_getUid("location"),function(_12,_13){
with(_12){
return location;
}
}),new objj_method(sel_getUid("setLocation:"),function(_14,_15,_16){
with(_14){
location=_16;
}
}),new objj_method(sel_getUid("profileImageUrl"),function(_17,_18){
with(_17){
return profileImageUrl;
}
}),new objj_method(sel_getUid("setProfileImageUrl:"),function(_19,_1a,_1b){
with(_19){
profileImageUrl=_1b;
}
}),new objj_method(sel_getUid("attributes"),function(_1c,_1d){
with(_1c){
return {"twitterer":{"screen_name":screenName}};
}
})]);
p;27;classes/views/DDButtonBar.jI;15;AppKit/CPView.jc;1655;
var _1=objj_allocateClassPair(CPView,"DDButtonBar"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("addButton"),new objj_ivar("suggestionsController")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("setSuggestionsController:"),function(_3,_4,_5){
with(_3){
suggestionsController=_5;
objj_msgSend(addButton,"setTarget:",_5);
objj_msgSend(addButton,"setAction:",sel_getUid("displaySheet:"));
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_6,_7){
with(_6){
var _8=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:","images/bg-button-bar.png")));
objj_msgSend(_6,"setBackgroundColor:",_8);
var _9=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:","images/add-button.png"));
objj_msgSend(_9,"setSize:",CGSizeMake(31,23));
var _a=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:","images/add-button-pressed.png"));
objj_msgSend(_9,"setSize:",CGSizeMake(31,23));
addButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(0,0,31,23));
objj_msgSend(addButton,"setTitle:","?");
objj_msgSend(addButton,"setBordered:",NO);
objj_msgSend(addButton,"setImage:",_9);
objj_msgSend(addButton,"setAlternateImage:",_a);
objj_msgSend(addButton,"setImagePosition:",CPImageOnly);
objj_msgSend(_6,"addSubview:",addButton);
}
})]);
p;41;classes/views/DefaultCollectionViewItem.jI;15;AppKit/CPView.jc;1879;
var _1=objj_allocateClassPair(CPView,"DefaultCollectionViewItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("label"),new objj_ivar("bgColor"),new objj_ivar("selectedBgColor"),new objj_ivar("textShadowColor"),new objj_ivar("selectedTextShadowColor")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("label"),function(_3,_4){
with(_3){
return label;
}
}),new objj_method(sel_getUid("setLabel:"),function(_5,_6,_7){
with(_5){
label=_7;
}
}),new objj_method(sel_getUid("setRepresentedObject:"),function(_8,_9,_a){
with(_8){
bgColor=objj_msgSend(CPColor,"colorWithHexString:","f3f7fb");
selectedBgColor=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:","images/bg-CollectionViewItem.png")));
textShadowColor=objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",255/255,255/255,255/255,1);
selectedTextShadowColor=objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",0/255,0/255,0/255,0.5);
objj_msgSend(label,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(label,"setTextShadowColor:",textShadowColor);
objj_msgSend(label,"setTextShadowOffset:",CGSizeMake(0,0.5));
objj_msgSend(label,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_8,"setBackgroundColor:",bgColor);
}
}),new objj_method(sel_getUid("setSelected:"),function(_b,_c,_d){
with(_b){
objj_msgSend(_b,"setBackgroundColor:",_d?selectedBgColor:bgColor);
objj_msgSend(label,"setTextColor:",_d?objj_msgSend(CPColor,"whiteColor"):objj_msgSend(CPColor,"blackColor"));
objj_msgSend(label,"setTextShadowColor:",_d?selectedTextShadowColor:textShadowColor);
objj_msgSend(label,"setTextShadowOffset:",_d?CGSizeMake(0,-1.5):CGSizeMake(0,0.5));
}
})]);
p;26;classes/views/HeaderView.jI;15;AppKit/CPView.jc;1818;
var _1=objj_allocateClassPair(CPView,"HeaderView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("headerTitle"),new objj_ivar("aboutButton")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("awakeFromCib"),function(_3,_4){
with(_3){
var _5=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:","images/bg-header-view.png")));
var _6=objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",255/255,255/255,255/255,0.8);
objj_msgSend(_3,"setBackgroundColor:",_5);
headerTitle=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(16,3,0,0));
objj_msgSend(headerTitle,"setStringValue:","devdiari.es");
objj_msgSend(headerTitle,"setFont:",objj_msgSend(CPFont,"boldSystemFontOfSize:",16));
objj_msgSend(headerTitle,"setTextShadowColor:",_6);
objj_msgSend(headerTitle,"setTextShadowOffset:",CGSizeMake(0,0.5));
objj_msgSend(headerTitle,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(headerTitle,"sizeToFit");
objj_msgSend(_3,"addSubview:",headerTitle);
var _7=objj_msgSend(_3,"bounds").size.width;
aboutButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(_7-50-16,3,50,24));
objj_msgSend(aboutButton,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(aboutButton,"setTitle:","about");
objj_msgSend(aboutButton,"setTarget:",_3);
objj_msgSend(aboutButton,"setAction:",sel_getUid("about:"));
objj_msgSend(_3,"addSubview:",aboutButton);
}
}),new objj_method(sel_getUid("about:"),function(_8,_9,_a){
with(_8){
window.open("http://suitmymind.com/blog/2010/01/07/devdiaries-a-sample-cappuccino-rails-application/");
}
})]);
p;25;classes/views/MonthView.jI;15;AppKit/CPView.jc;455;
var _1=objj_allocateClassPair(DefaultCollectionViewItem,"MonthView"),_2=_1.isa;
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("setRepresentedObject:"),function(_3,_4,_5){
with(_3){
objj_msgSendSuper({receiver:_3,super_class:objj_getClass("DefaultCollectionViewItem")},"setRepresentedObject:",_5);
objj_msgSend(label,"setStringValue:",_5);
}
})]);
p;35;classes/views/SuggestionSheetView.jI;17;AppKit/CPWindow.jc;3287;
var _1=objj_allocateClassPair(CPWindow,"SuggestionSheetView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("suggestionLabel"),new objj_ivar("suggestionTextField"),new objj_ivar("suggestionsController"),new objj_ivar("okButton"),new objj_ivar("cancelButton")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("suggestionTextField"),function(_3,_4){
with(_3){
return suggestionTextField;
}
}),new objj_method(sel_getUid("setSuggestionTextField:"),function(_5,_6,_7){
with(_5){
suggestionTextField=_7;
}
}),new objj_method(sel_getUid("suggestionsController"),function(_8,_9){
with(_8){
return suggestionsController;
}
}),new objj_method(sel_getUid("setSuggestionsController:"),function(_a,_b,_c){
with(_a){
suggestionsController=_c;
}
}),new objj_method(sel_getUid("setSuggestionsController:"),function(_d,_e,_f){
with(_d){
suggestionsController=_f;
objj_msgSend(okButton,"setTarget:",suggestionsController);
objj_msgSend(cancelButton,"setTarget:",suggestionsController);
}
}),new objj_method(sel_getUid("init"),function(_10,_11){
with(_10){
_10=objj_msgSendSuper({receiver:_10,super_class:objj_getClass("CPWindow")},"initWithContentRect:styleMask:",CGRectMake(0,0,300,135),CPDocModalWindowMask);
if(_10){
var _12=objj_msgSend(_10,"contentView");
suggestionLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(10,30,280,25));
objj_msgSend(suggestionLabel,"setStringValue:","Want to suggest a dev diary?");
suggestionTextField=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(10,55,280,30));
objj_msgSend(suggestionTextField,"setPlaceholderString:","@deviary");
objj_msgSend(suggestionTextField,"setEditable:",YES);
objj_msgSend(suggestionTextField,"setBezeled:",YES);
objj_msgSend(suggestionTextField,"setAutoresizingMask:",CPViewWidthSizable);
okButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(230,95,50,24));
objj_msgSend(okButton,"setTitle:","OK");
objj_msgSend(okButton,"setTag:",1);
objj_msgSend(okButton,"setAction:",sel_getUid("suggestTwitterer:"));
objj_msgSend(okButton,"setAutoresizingMask:",CPViewMinXMargin|CPViewMinYMargin);
cancelButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(120,95,100,24));
objj_msgSend(cancelButton,"setTitle:","Cancel");
objj_msgSend(cancelButton,"setTag:",0);
objj_msgSend(cancelButton,"setAction:",sel_getUid("closeSheet:"));
objj_msgSend(cancelButton,"setAutoresizingMask:",CPViewMinXMargin|CPViewMinYMargin);
objj_msgSend(_12,"addSubview:",suggestionLabel);
objj_msgSend(_12,"addSubview:",suggestionTextField);
objj_msgSend(_12,"addSubview:",okButton);
objj_msgSend(_12,"addSubview:",cancelButton);
}
return _10;
}
}),new objj_method(sel_getUid("showConfirmMessage"),function(_13,_14){
with(_13){
console.log("-- should show a confirm message");
objj_msgSend(okButton,"setTitle:","Close");
objj_msgSend(okButton,"setAction:",sel_getUid("closeSheet:"));
objj_msgSend(cancelButton,"removeFromSuperview");
objj_msgSend(suggestionTextField,"removeFromSuperview");
objj_msgSend(suggestionLabel,"setFrame:",CGRectMake(10,30,280,50));
objj_msgSend(suggestionLabel,"setStringValue:","Your suggestion has been sent.\nThanks!");
}
})]);
p;32;classes/views/TweetsHeaderView.jI;15;AppKit/CPView.jc;1554;
var _1=objj_allocateClassPair(CPView,"TweetsHeaderView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("tweetsSearchField")]);
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("awakeFromCib"),function(_3,_4){
with(_3){
var _5=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:","images/bg-tweets-header.png")));
objj_msgSend(_3,"setBackgroundColor:",_5);
var _6=200;
var _7=10;
var _8=CGRectGetWidth(objj_msgSend(_3,"bounds"))-_6-_7;
tweetsSearchField=objj_msgSend(objj_msgSend(CPSearchField,"alloc"),"initWithFrame:",CGRectMake(_8,14,200,30));
objj_msgSend(tweetsSearchField,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(tweetsSearchField,"setEditable:",YES);
objj_msgSend(tweetsSearchField,"setPlaceholderString:","Search Tweets");
objj_msgSend(tweetsSearchField,"setBordered:",YES);
objj_msgSend(tweetsSearchField,"setBezeled:",YES);
objj_msgSend(tweetsSearchField,"setTarget:",_3);
objj_msgSend(tweetsSearchField,"setAction:",sel_getUid("performSearch:"));
objj_msgSend(tweetsSearchField,"setSendsWholeSearchString:",YES);
objj_msgSend(_3,"addSubview:",tweetsSearchField);
}
}),new objj_method(sel_getUid("performSearch:"),function(_9,_a,_b){
with(_9){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:","SearchPerformed",objj_msgSend(_b,"stringValue"));
}
})]);
p;25;classes/views/TweetView.jI;15;AppKit/CPView.jc;1191;
var _1=objj_allocateClassPair(DefaultCollectionViewItem,"TweetView"),_2=_1.isa;
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("setRepresentedObject:"),function(_3,_4,_5){
with(_3){
objj_msgSendSuper({receiver:_3,super_class:objj_getClass("DefaultCollectionViewItem")},"setRepresentedObject:",_5);
bgColor=objj_msgSend(CPColor,"colorWithHexString:","FFFFFF");
objj_msgSend(_3,"setBackgroundColor:",bgColor);
var _6=objj_msgSend(_5,"text");
_6=_6.replace(/\n/g," ");
var _7=objj_msgSend(_5,"day"),_8=objj_msgSend(_5,"month");
objj_msgSend(label,"setLineBreakMode:",CPLineBreakByTruncatingTail);
if(_7!==nil&&_8!==nil){
objj_msgSend(label,"setStringValue:",_8+"/"+_7+" : "+_6);
}else{
objj_msgSend(label,"setStringValue:",_6);
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_9,_a,_b){
with(_9){
if(objj_msgSend(_b,"clickCount")>1){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:","TweetDoubleClicked",nil);
}else{
objj_msgSendSuper({receiver:_9,super_class:objj_getClass("DefaultCollectionViewItem")},"mouseDown:",_b);
}
}
})]);
p;29;classes/views/TwittererView.jI;15;AppKit/CPView.jc;486;
var _1=objj_allocateClassPair(DefaultCollectionViewItem,"TwittererView"),_2=_1.isa;
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("setRepresentedObject:"),function(_3,_4,_5){
with(_3){
objj_msgSendSuper({receiver:_3,super_class:objj_getClass("DefaultCollectionViewItem")},"setRepresentedObject:",_5);
objj_msgSend(label,"setStringValue:",objj_msgSend(_5,"screenName"));
}
})]);
p;24;classes/views/YearView.jI;15;AppKit/CPView.jc;454;
var _1=objj_allocateClassPair(DefaultCollectionViewItem,"YearView"),_2=_1.isa;
objj_registerClassPair(_1);
objj_addClassForBundle(_1,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_1,[new objj_method(sel_getUid("setRepresentedObject:"),function(_3,_4,_5){
with(_3){
objj_msgSendSuper({receiver:_3,super_class:objj_getClass("DefaultCollectionViewItem")},"setRepresentedObject:",_5);
objj_msgSend(label,"setStringValue:",_5);
}
})]);
p;53;Frameworks/Extensions/CPActiveRecord/CPActiveRecord.jI;21;Foundation/CPObject.ji;38;CPURLRequest-CPActiveRecordAdditions.jc;16327;
CPActiveRecordCollectionWillLoad="CPActiveRecordCollectionWillLoad";
CPActiveRecordCollectionDidLoad="CPActiveRecordCollectionDidLoad";
CPActiveRecordRecordWillLoad="CPActiveRecordRecordWillLoad";
CPActiveRecordRecordDidLoad="CPActiveRecordRecordDidLoad";
CPActiveRecordRecordWillSave="CPActiveRecordRecordWillSave";
CPActiveRecordRecordDidSave="CPActiveRecordRecordDidSave";
CPActiveRecordRecordWillDestroy="CPActiveRecordRecordWillDestroy";
CPActiveRecordRecordDidDestroy="CPActiveRecordRecordDidDestroy";
var _1;
var _2="id";
var _3=objj_allocateClassPair(CPObject,"CPActiveRecord"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("identifier"),new objj_ivar("_lastSync"),new objj_ivar("_invalidated")]);
objj_registerClassPair(_3);
objj_addClassForBundle(_3,objj_getBundleWithPath(OBJJ_CURRENT_BUNDLE.path));
class_addMethods(_3,[new objj_method(sel_getUid("identifier"),function(_5,_6){
with(_5){
return identifier;
}
}),new objj_method(sel_getUid("setIdentifier:"),function(_7,_8,_9){
with(_7){
identifier=_9;
}
}),new objj_method(sel_getUid("resourcePath"),function(_a,_b){
with(_a){
var _c=objj_msgSend(objj_msgSend(objj_msgSend(_a,"class"),"resourcesPath"),"absoluteString");
return objj_msgSend(CPURL,"URLWithString:",_c+"/"+(objj_msgSend(_a,"identifier")||""));
}
}),new objj_method(sel_getUid("setIdentifier:"),function(_d,_e,_f){
with(_d){
if(identifier===_f){
return;
}
var _10=objj_msgSend(CPActiveRecord,"_recordsForClass:",objj_msgSend(_d,"class"));
if(identifier){
objj_msgSend(_10,"removeObjectForKey:",identifier);
}
identifier=_f;
if(identifier){
objj_msgSend(_10,"setObject:forKey:",_d,identifier);
}
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("initialize"),function(_11,_12){
with(_11){
_11._CPActiveRecordLastSync=0;
}
}),new objj_method(sel_getUid("setIdentifierKey:"),function(_13,_14,_15){
with(_13){
_2=_15;
}
}),new objj_method(sel_getUid("identifierKey"),function(_16,_17){
with(_16){
return _2;
}
}),new objj_method(sel_getUid("_recordsForClass:"),function(_18,_19,_1a){
with(_18){
if(!_1){
_1=objj_msgSend(CPDictionary,"dictionary");
}
var _1b=objj_msgSend(_1,"objectForKey:",objj_msgSend(_1a,"className"));
if(!_1b){
_1b=objj_msgSend(CPDictionary,"dictionary");
objj_msgSend(_1,"setObject:forKey:",_1b,objj_msgSend(_1a,"className"));
}
return _1b;
}
}),new objj_method(sel_getUid("_recordForClass:identifier:"),function(_1c,_1d,_1e,_1f){
with(_1c){
if(!_1f){
return objj_msgSend(objj_msgSend(_1e,"alloc"),"init");
}
var _20=objj_msgSend(CPActiveRecord,"_recordsForClass:",_1e),_21=objj_msgSend(_20,"objectForKey:",_1f);
if(!_21){
_21=objj_msgSend(objj_msgSend(_1e,"alloc"),"init");
objj_msgSend(_21,"setIdentifier:",_1f);
objj_msgSend(_20,"setObject:forKey:",_21,_1f);
}
return _21;
}
}),new objj_method(sel_getUid("new"),function(_22,_23){
with(_22){
return objj_msgSend(_22,"new:",nil);
}
}),new objj_method(sel_getUid("new:"),function(_24,_25,_26){
with(_24){
if(!_26){
_26={};
}
var _27=objj_msgSend(CPActiveRecord,"_recordForClass:identifier:",_24,_26[_2]);
for(var _28 in _26){
if(_28==_2){
continue;
}
var _29=objj_msgSend(_28,"componentsSeparatedByString:","_");
for(var i=1,_2a=objj_msgSend(_29,"count");i<_2a;i++){
_29[i]=objj_msgSend(_29[i],"capitalizedString");
}
var _2b=objj_msgSend(_29,"componentsJoinedByString:","");
var _2c=_26[_28];
if(objj_msgSend(objj_msgSend(_24,"class"),"respondsToSelector:",sel_getUid("foreignKeys"))){
var _2d=objj_msgSend(objj_msgSend(_24,"class"),"foreignKeys");
for(var i=0,_2a=objj_msgSend(_2d,"count");i<_2a;i++){
var _2e=_2d[i];
if(_2e["key"]!=_2b){
continue;
}
_2c=objj_msgSend(_2e["model"],"find:",_2c);
break;
}
}
try{
objj_msgSend(_27,"setValue:forKey:",_2c,_2b);
}
catch(anException){
if(objj_msgSend(anException,"name")===CPUndefinedKeyException){
CPLog.info("Could not connect the remote property "+_2b+" of record of model "+objj_msgSend(_27,"className"));
}else{
throw anException;
}
}
}
return _27;
}
}),new objj_method(sel_getUid("resourcesPath"),function(_2f,_30){
with(_2f){
return objj_msgSend(CPURL,"URLWithString:","/"+objj_msgSend(objj_msgSend(_2f,"className"),"lowercaseString")+"s");
}
})]);
var _3=objj_getClass("CPActiveRecord");
if(!_3){
objj_exception_throw(new objj_exception(OBJJClassNotFoundException,"*** Could not find definition for class \"CPActiveRecord\""));
}
var _4=_3.isa;
class_addMethods(_4,[new objj_method(sel_getUid("all"),function(_31,_32){
with(_31){
return objj_msgSend(_31,"findAll");
}
}),new objj_method(sel_getUid("first"),function(_33,_34){
with(_33){
return objj_msgSend(_33,"findFirst");
}
}),new objj_method(sel_getUid("last"),function(_35,_36){
with(_35){
return objj_msgSend(_35,"findLast");
}
}),new objj_method(sel_getUid("find:"),function(_37,_38,_39){
with(_37){
if(_39.isa){
return objj_msgSend(_37,"_find_by_ids:",_39);
}
var _3a=objj_msgSend(objj_msgSend(CPActiveRecord,"_recordsForClass:",_37),"allValues"),_3b=objj_msgSend(_3a,"count");
if(_39.conditions){
var _3c=[];
for(var i=0;i<_3b;i++){
var _3d=_3a[i],_3e=YES;
for(conditionName in _39.conditions){
var _3f=_39.conditions[conditionName];
var _40=objj_msgSend(_3d,"valueForKey:",conditionName)+"";
if(_3f.isa&&objj_msgSend(_3f,"class")===CPArray){
if(!objj_msgSend(_3f,"containsObject:",objj_msgSend(_3d,"valueForKey:",conditionName))){
_3e=NO;
break;
}
}else{
if((_40.search(RegExp(_3f,"gi")))==-1){
_3e=NO;
break;
}
}
}
if(_3e){
objj_msgSend(_3c,"addObject:",_3d);
}
if(_3e&&_39.first){
break;
}
}
}else{
var _3c=_3a;
}
if(!_39.all){
var _41=_3c[0],_42=_3c[0];
var _3b=objj_msgSend(_3c,"count");
for(var i=0;i<_3b;i++){
var _3d=_3c[i];
if(objj_msgSend(_3d,"identifier")<objj_msgSend(_41,"identifier")){
_41=_3d;
}
if(objj_msgSend(_3d,"identifier")>objj_msgSend(_42,"identifier")){
_42=_3d;
}
}
}
if(_39.last){
return _42;
}else{
if(_39.all){
return _3c;
}else{
return _41;
}
}
}
}),new objj_method(sel_getUid("_find_by_ids:"),function(_43,_44,ids){
with(_43){
var _45=objj_msgSend(CPActiveRecord,"_recordsForClass:",_43);
switch(objj_msgSend(ids,"class")){
case CPNumber:
case CPString:
var _46=objj_msgSend(_45,"objectForKey:",ids);
if(!_46){
var obj={};
obj[_2]=ids;
_46=objj_msgSend(_43,"new:",obj);
}
return _46;
case CPArray:
var _47=objj_msgSend(ids,"count"),_48=[];
for(var i=0;i<_47;i++){
var _46=objj_msgSend(_45,"objectForKey:",ids[i]);
if(_46){
objj_msgSend(_48,"addObject:",_46);
}
}
return _48;
}
}
}),new objj_method(sel_getUid("forwardInvocation:"),function(_49,_4a,_4b){
with(_49){
var _4c=objj_msgSend(objj_msgSend(_4b,"selector"),"substringFromIndex:",4),_4d={};
var _4e;
if(objj_msgSend(_4c,"hasPrefix:","All")){
_4e="all";
}else{
if(objj_msgSend(_4c,"hasPrefix:","First")){
_4e="first";
}else{
if(objj_msgSend(_4c,"hasPrefix:","Last")){
_4e="last";
}
}
}
if(_4e){
_4d[_4e]=YES;
}
_4c=objj_msgSend(_4c,"substringFromIndex:",objj_msgSend(_4e,"length"));
var _4f=objj_msgSend(_4c,"componentsSeparatedByString:",":");
objj_msgSend(_4f,"removeLastObject");
var _50=objj_msgSend(_4f,"count");
for(var i=0;i<_50;i++){
var _51=_4f[i],_52=objj_msgSend(_4b,"argumentAtIndex:",i+2);
if(objj_msgSend(_51,"hasPrefix:","By")||objj_msgSend(_51,"hasPrefix:","by")){
_51=objj_msgSend(_51,"substringFromIndex:",2);
_51=objj_msgSend(objj_msgSend(_51,"characterAtIndex:",0),"lowercaseString")+objj_msgSend(_51,"substringFromIndex:",1);
if(!_4d.conditions){
_4d.conditions={};
}
_4d.conditions[_51]=_52;
}else{
if(objj_msgSend(_51,"length")===0){
for(var _53 in _52){
_4d[_53]=_52[_53];
}
}
}
}
objj_msgSend(_4b,"setSelector:",sel_getUid("find:"));
objj_msgSend(_4b,"setArgument:atIndex:",_4d,2);
objj_msgSend(_4b,"invoke");
}
}),new objj_method(sel_getUid("methodSignatureForSelector:"),function(_54,_55,_56){
with(_54){
return objj_msgSend(_56,"hasPrefix:",sel_getUid("find"));
}
})]);
var _3=objj_getClass("CPActiveRecord");
if(!_3){
objj_exception_throw(new objj_exception(OBJJClassNotFoundException,"*** Could not find definition for class \"CPActiveRecord\""));
}
var _4=_3.isa;
class_addMethods(_3,[new objj_method(sel_getUid("addObserver:selector:"),function(_57,_58,_59,_5a){
with(_57){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_59,_5a,CPActiveRecordRecordDidLoad,_57);
if(!objj_msgSend(_57,"loadIfNeeded")){
objj_msgSend(_59,_5a,objj_msgSend(CPNotification,"notificationWithName:object:",CPActiveRecordRecordDidLoad,_57));
}
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("addObserver:selector:"),function(_5b,_5c,_5d,_5e){
with(_5b){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_5d,_5e,CPActiveRecordCollectionDidLoad,_5b);
if(!objj_msgSend(_5b,"loadIfNeeded")){
objj_msgSend(_5d,_5e,objj_msgSend(CPNotification,"notificationWithName:object:",CPActiveRecordCollectionDidLoad,_5b));
}
}
}),new objj_method(sel_getUid("setAutoRefresh:"),function(_5f,_60,_61){
with(_5f){
if(_5f._CPActiveRecordAutoRefresh){
window.clearInterval(_5f._CPActiveRecordAutoRefresh);
}
if(_61){
_5f._CPActiveRecordAutoRefresh=window.setInterval(function(){
objj_msgSend(_5f,"loadIfNeeded");
},objj_msgSend(_5f,"syncFrequency")+1);
}
}
}),new objj_method(sel_getUid("autoRefresh"),function(_62,_63){
with(_62){
return _62._CPActiveRecordAutoRefresh;
}
})]);
var _3=objj_getClass("CPActiveRecord");
if(!_3){
objj_exception_throw(new objj_exception(OBJJClassNotFoundException,"*** Could not find definition for class \"CPActiveRecord\""));
}
var _4=_3.isa;
class_addMethods(_3,[new objj_method(sel_getUid("loadIfNeeded"),function(_64,_65){
with(_64){
if(!identifier){
return;
}
var now=(new Date()).getTime();
if(now>_lastSync+objj_msgSend(objj_msgSend(_64,"class"),"syncFrequency")){
_lastSync=now;
var _66=objj_msgSend(_64,"recordWillLoad");
if(!_66){
return;
}
var _67=objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",_66,objj_msgSend(_64,"class"));
_67.postTarget=_64;
_67.postAction=sel_getUid("recordDidLoad");
return true;
}
}
}),new objj_method(sel_getUid("loadWithURL:"),function(_68,_69,_6a){
with(_68){
_68._overwriteResourcePath=_6a;
objj_msgSend(_68,"reload");
}
}),new objj_method(sel_getUid("reload"),function(_6b,_6c){
with(_6b){
_lastSync=0;
objj_msgSend(_6b,"loadIfNeeded");
}
}),new objj_method(sel_getUid("save"),function(_6d,_6e){
with(_6d){
var _6f=objj_msgSend(_6d,"recordWillSave");
if(!_6f){
return;
}
var _70=objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",_6f,objj_msgSend(_6d,"class"));
_70.postTarget=_6d;
_70.postAction=sel_getUid("recordDidSave");
}
}),new objj_method(sel_getUid("destroy:"),function(_71,_72,_73){
with(_71){
if(!_73){
return;
}
var _74=objj_msgSend(_71,"recordWillDestroy");
if(!_74){
return;
}
var _75=objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",_74,objj_msgSend(_71,"class"));
_75.postTarget=_71;
_75.postAction=sel_getUid("recordDidDestroy");
}
}),new objj_method(sel_getUid("raiseValidationError:"),function(_76,_77,_78){
with(_76){
CPLog.info("Server refused record: "+_78);
}
}),new objj_method(sel_getUid("recordWillLoad"),function(_79,_7a){
with(_79){
var _7b;
if(_79._overwriteResourcePath){
_7b=_79._overwriteResourcePath;
_79._overwriteResourcePath=nil;
}else{
_7b=objj_msgSend(_79,"resourcePath");
}
if(!_7b){
return nil;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPActiveRecordRecordWillLoad,_79);
return objj_msgSend(CPURLRequest,"requestJSONWithURL:",_7b);
}
}),new objj_method(sel_getUid("recordDidLoad"),function(_7c,_7d){
with(_7c){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPActiveRecordRecordDidLoad,_7c);
}
}),new objj_method(sel_getUid("recordWillSave"),function(_7e,_7f){
with(_7e){
var _80=objj_msgSend(_7e,"resourcePath");
if(!_80){
return nil;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPActiveRecordRecordWillSave,_7e);
var _81=objj_msgSend(CPURLRequest,"requestJSONWithURL:",_80);
objj_msgSend(_81,"setHTTPMethod:",identifier?"PUT":"POST");
objj_msgSend(_81,"setHTTPBody:",objj_msgSend(CPURLRequest,"stringifyJSON:",objj_msgSend(_7e,"attributes")));
return _81;
}
}),new objj_method(sel_getUid("recordDidSave"),function(_82,_83){
with(_82){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPActiveRecordRecordDidSave,_82);
objj_msgSend(_82,"recordDidLoad");
}
}),new objj_method(sel_getUid("recordWillDestroy"),function(_84,_85){
with(_84){
if(!identifier){
return;
}
var _86=objj_msgSend(_84,"resourcePath");
if(!_86){
return nil;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPActiveRecordRecordWillDestroy,_84);
var _87=objj_msgSend(CPURLRequest,"requestJSONWithURL:",_86);
objj_msgSend(_87,"setHTTPMethod:","DELETE");
return _87;
}
}),new objj_method(sel_getUid("recordDidDestroy"),function(_88,_89){
with(_88){
objj_msgSend(objj_msgSend(CPActiveRecord,"_recordsForClass:",objj_msgSend(_88,"class")),"removeObjectForKey:",identifier);
identifier=nil;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPActiveRecordRecordDidDestroy,_88);
if(objj_msgSend(objj_msgSend(_88,"class"),"destroyPostsLoadNotification")){
objj_msgSend(_88,"recordDidLoad");
}
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("syncFrequency"),function(_8a,_8b){
with(_8a){
return 5000;
}
}),new objj_method(sel_getUid("loadIfNeeded"),function(_8c,_8d){
with(_8c){
var now=(new Date()).getTime();
if(now>_8c._CPActiveRecordLastSync+objj_msgSend(_8c,"syncFrequency")){
_8c._CPActiveRecordLastSync=now;
var _8e=objj_msgSend(_8c,"collectionWillLoad");
if(!_8e){
return;
}
var _8f=objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",_8e,_8c);
_8f.postTarget=_8c;
_8f.postAction=sel_getUid("collectionDidLoad");
return true;
}
}
}),new objj_method(sel_getUid("loadWithURL:"),function(_90,_91,_92){
with(_90){
_90._overwriteResourcesPath=_92;
objj_msgSend(_90,"reload");
}
}),new objj_method(sel_getUid("reload"),function(_93,_94){
with(_93){
_93._CPActiveRecordLastSync=0;
objj_msgSend(_93,"loadIfNeeded");
}
}),new objj_method(sel_getUid("destroyPostsLoadNotification"),function(_95,_96){
with(_95){
return NO;
}
}),new objj_method(sel_getUid("connection:didReceiveResponse:"),function(_97,_98,_99,_9a){
with(_97){
var _9b=objj_msgSend(_9a,"statusCode");
if(_9b==422&&_99.postTarget){
_99.postTarget._invalidated=YES;
}
}
}),new objj_method(sel_getUid("connection:didReceiveData:"),function(_9c,_9d,_9e,_9f){
with(_9c){
try{
var _a0=objj_msgSend(CPURLRequest,"parseJSON:",_9f);
}
catch(anException){
CPLog.info("Could not load resource");
return;
}
if(_9e.postTarget&&_9e.postTarget._invalidated){
_9e.postTarget._invalidated=NO;
return objj_msgSend(_9e.postTarget,"raiseValidationError:",_a0);
}
objj_msgSend(CPActiveRecord,"parseData:",_a0);
if(_9e.postTarget&&_9e.postAction&&objj_msgSend(_9e.postTarget,"respondsToSelector:",_9e.postAction)){
objj_msgSend(_9e.postTarget,_9e.postAction);
}
}
}),new objj_method(sel_getUid("parseData:"),function(_a1,_a2,_a3){
with(_a1){
if(!_a3){
return;
}
if(_a3.isa){
if(objj_msgSend(_a3,"class")===CPArray){
var _a4=objj_msgSend(_a3,"count");
for(var i=0;i<_a4;i++){
objj_msgSend(CPActiveRecord,"parseData:",_a3[i]);
}
}
}else{
for(var key in _a3){
if(key=="list"){
for(_a5 in _a3[key]){
if(_a5=="@offset"){
continue;
}
var _a6=objj_getClass(_a5),_a7=_a3[key][_a5];
if(_a7.isa&&objj_msgSend(_a7,"class")===CPArray){
for(var i=0,_a4=objj_msgSend(_a7,"count");i<_a4;i++){
objj_msgSend(_a6,"new:",_a7[i]);
}
}else{
objj_msgSend(_a6,"new:",_a7);
}
}
}else{
var _a5=objj_getClass(key.charAt(0).toUpperCase()+key.substring(1));
objj_msgSend(_a5,"new:",_a3[key]);
}
}
}
}
}),new objj_method(sel_getUid("collectionWillLoad"),function(_a8,_a9){
with(_a8){
var _aa;
if(_a8._overwriteResourcesPath){
_aa=_a8._overwriteResourcesPath;
_a8._overwriteResourcesPath=nil;
}else{
_aa=objj_msgSend(_a8,"resourcesPath");
}
if(!_aa){
return nil;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPActiveRecordCollectionWillLoad,_a8);
return objj_msgSend(CPURLRequest,"requestJSONWithURL:",_aa);
}
}),new objj_method(sel_getUid("collectionDidLoad"),function(_ab,_ac){
with(_ab){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPActiveRecordCollectionDidLoad,_ab);
}
})]);
p;75;Frameworks/Extensions/CPActiveRecord/CPURLRequest-CPActiveRecordAdditions.jI;25;Foundation/CPURLRequest.jc;908;
var _1=objj_getClass("CPURLRequest");
if(!_1){
objj_exception_throw(new objj_exception(OBJJClassNotFoundException,"*** Could not find definition for class \"CPURLRequest\""));
}
var _2=_1.isa;
class_addMethods(_2,[new objj_method(sel_getUid("requestJSONWithURL:"),function(_3,_4,_5){
with(_3){
var _6=objj_msgSend(_3,"requestWithURL:",_5);
objj_msgSend(_6,"setValue:forHTTPHeaderField:","application/json","Accept");
objj_msgSend(_6,"setValue:forHTTPHeaderField:","application/json","Content-Type");
return _6;
}
}),new objj_method(sel_getUid("parseJSON:"),function(_7,_8,_9){
with(_7){
try{
var _a=JSON.parse(_9);
}
catch(anException){
CPLog.info("Could not parse JSON: "+_9);
}
if(_a){
return _a;
}
}
}),new objj_method(sel_getUid("stringifyJSON:"),function(_b,_c,_d){
with(_b){
try{
var _e=JSON.stringify(_d);
}
catch(anException){
CPLog.info("Could not stringify JSON.");
}
if(_e){
return _e;
}
}
})]);
e;